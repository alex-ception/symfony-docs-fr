

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Profiler &mdash; symfony-docs-fr v0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="symfony-docs-fr v0.1 documentation" href="../../index.html" />
    <link rel="up" title="Symfony2 Internals" href="index.html" />
    <link rel="next" title="The Symfony2 Stable API" href="../stable_api.html" />
    <link rel="prev" title="The Event Dispatcher" href="event_dispatcher.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../stable_api.html" title="The Symfony2 Stable API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="event_dispatcher.html" title="The Event Dispatcher"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">symfony-docs-fr v0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Manuel</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Symfony2 Internals</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="profiler">
<span id="index-0"></span><h1>Profiler<a class="headerlink" href="#profiler" title="Permalink to this headline">¶</a></h1>
<p>When enabled, the Symfony2 profiler collects useful information about each
request made to your application and store them for later analysis. Use the
profiler in the development environment to help you to debug your code and
enhance performance; use it in the production environment to explore problems
after the fact.</p>
<p>You rarely have to deal with the profiler directly as Symfony2 provides
visualizer tools like the Web Debug Toolbar and the Web Profiler. If you use
the Symfony2 sandbox, or create an application with the Symfony2 console, the
profiler, the web debug toolbar, and the web profiler are all already
configured with sensible settings.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The profiler collects information for all requests (simple requests,
redirects, exceptions, Ajax requests, ESI requests; and for all HTTP
methods and all formats). It means that for a single URL, you can have
several associated profiling data (one per external request/response
pair).</p>
</div>
<div class="section" id="visualizing-profiling-data">
<span id="index-1"></span><h2>Visualizing Profiling Data<a class="headerlink" href="#visualizing-profiling-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-the-web-debug-toolbar">
<h3>Using the Web Debug Toolbar<a class="headerlink" href="#using-the-web-debug-toolbar" title="Permalink to this headline">¶</a></h3>
<p>In the development environment, the web debug toolbar is available at the
bottom of all pages. It displays a good summary of the profiling data that
gives you instant access to a lot of useful information when something does
not work as expected.</p>
<p>If the summary provided by the Web Debug Toolbar is not enough, click on the
token link (a string made of 13 random characters) to access the Web Profiler.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the token is not clickable, it means that the profiler routes are not
registered (see below for configuration information).</p>
</div>
</div>
<div class="section" id="analyzing-profiling-data-with-the-web-profiler">
<h3>Analyzing Profiling data with the Web Profiler<a class="headerlink" href="#analyzing-profiling-data-with-the-web-profiler" title="Permalink to this headline">¶</a></h3>
<p>The Web Profiler is a visualization tool for profiling data that you can use
in development to debug your code and enhance performance; but it can also be
used to explore problems that occur in production. It exposes all information
collected by the profiler in a web interface.</p>
</div>
</div>
<div class="section" id="accessing-the-profiling-information">
<span id="index-2"></span><h2>Accessing the Profiling information<a class="headerlink" href="#accessing-the-profiling-information" title="Permalink to this headline">¶</a></h2>
<p>You don&#8217;t need to use the default visualizer to access the profiling
information. But how can you retrieve profiling information for a specific
request after the fact? When the profiler stores data about a Request, it also
associates a token with it; this token is available in the <tt class="docutils literal"><span class="pre">X-Debug-Token</span></tt>
HTTP header of the Response:</p>
<div class="highlight-python"><pre>$profiler = $container-&gt;get('profiler')-&gt;getFromResponse($response);

$profiler = $container-&gt;get('profiler')-&gt;getFromToken($token);</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">When the profiler is enabled but not the web debug toolbar, or when you
want to get the token for an Ajax request, use a tool like Firebug to get
the value of the <tt class="docutils literal"><span class="pre">X-Debug-Token</span></tt> HTTP header.</p>
</div>
<p>You can also set the token from your code, based for instance on the username
or any other information, to ease the retrieval later on:</p>
<div class="highlight-python"><pre>$profiler-&gt;setToken('abcd');</pre>
</div>
<p>You can also use the <tt class="docutils literal"><span class="pre">find()</span></tt> method to access tokens based on some
criteria:</p>
<div class="highlight-python"><pre>// get the latest 10 tokens
$tokens = $container-&gt;get('profiler')-&gt;find('', '', 10);

// get the latest 10 tokens for all URL containing /admin/
$tokens = $container-&gt;get('profiler')-&gt;find('', '/admin/', 10);

// get the latest 10 tokens for local requests
$tokens = $container-&gt;get('profiler')-&gt;find('127.0.0.1', '', 10);</pre>
</div>
<p>If you want to manipulate profiling data on a different machine than the one
where the information were generated, use the <tt class="docutils literal"><span class="pre">export()</span></tt> and <tt class="docutils literal"><span class="pre">import()</span></tt>
methods:</p>
<div class="highlight-python"><pre>// on the production machine
$profiler = $container-&gt;get('profiler')-&gt;getFromToken($token);
$data = $profiler-&gt;export();

// on the development machine
$profiler-&gt;import($data);</pre>
</div>
</div>
<div class="section" id="configuration">
<span id="index-3"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The default Symfony2 configuration comes with sensible settings for the
profiler, the web debug toolbar, and the web profiler. Here is for instance
the configuration for the development environment:</p>
<p>When <tt class="docutils literal"><span class="pre">only-exceptions</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt>, the profiler only collects data
when an exception is thrown by the application.</p>
<p>When <tt class="docutils literal"><span class="pre">intercept-redirects</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt>, the web profiler intercepts
the redirects and gives you the opportunity to look at the collected data
before following the redirect.</p>
<p>If you enable the web profiler, you also need to mount the profiler routes:</p>
<p>As the profiler adds some overhead, you might want to enable it only under
certain circumstances in the production environment. The <tt class="docutils literal"><span class="pre">only-exceptions</span></tt>
settings limits profiling to 500 pages, but what if you want to get
information when the client IP comes from a specific address, or for a limited
portion of the website? You can use a request matcher:</p>
</div>
<div class="section" id="learn-more-from-the-cookbook">
<h2>Learn more from the Cookbook<a class="headerlink" href="#learn-more-from-the-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../cookbook/testing/profiling.html"><em>How to use the Profiler in a Functional Test</em></a></li>
<li><a class="reference internal" href="../../cookbook/profiler/data_collector.html"><em>How to create a custom Data Collector</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Profiler</a><ul>
<li><a class="reference internal" href="#visualizing-profiling-data">Visualizing Profiling Data</a><ul>
<li><a class="reference internal" href="#using-the-web-debug-toolbar">Using the Web Debug Toolbar</a></li>
<li><a class="reference internal" href="#analyzing-profiling-data-with-the-web-profiler">Analyzing Profiling data with the Web Profiler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#accessing-the-profiling-information">Accessing the Profiling information</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#learn-more-from-the-cookbook">Learn more from the Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="event_dispatcher.html"
                        title="previous chapter">The Event Dispatcher</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../stable_api.html"
                        title="next chapter">The Symfony2 Stable API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/book/internals/profiler.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../stable_api.html" title="The Symfony2 Stable API"
             >next</a> |</li>
        <li class="right" >
          <a href="event_dispatcher.html" title="The Event Dispatcher"
             >previous</a> |</li>
        <li><a href="../../index.html">symfony-docs-fr v0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Manuel</a> &raquo;</li>
          <li><a href="index.html" >Symfony2 Internals</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>