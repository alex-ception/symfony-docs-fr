

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating Pages in Symfony2 &mdash; symfony-docs-fr v0.1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="symfony-docs-fr v0.1 documentation" href="../index.html" />
    <link rel="up" title="Manuel" href="index.html" />
    <link rel="next" title="Doctrine" href="doctrine/index.html" />
    <link rel="prev" title="From flat PHP to Symfony2" href="from_flat_php_to_symfony2.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="doctrine/index.html" title="Doctrine"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="from_flat_php_to_symfony2.html" title="From flat PHP to Symfony2"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">symfony-docs-fr v0.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Manuel</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-pages-in-symfony2">
<span id="index-0"></span><h1>Creating Pages in Symfony2<a class="headerlink" href="#creating-pages-in-symfony2" title="Permalink to this headline">¶</a></h1>
<p>Creating a new page in Symfony2 is a simple two-step process:</p>
<ul class="simple">
<li><em>Create a route</em>: A route defines the URI (e.g. <tt class="docutils literal"><span class="pre">/about</span></tt>) for your
page and specifies a controller (a PHP function) that Symfony2 should
execute when the URI of an incoming request matches the route pattern;</li>
<li><em>Create a controller</em>: A controller is a PHP function that takes the incoming
request and transforms it into a Symfony2 <tt class="docutils literal"><span class="pre">Response</span></tt> object.</li>
</ul>
<p>We love this simple approach because it matches the way that the Web works.
Every interaction on the Web is initiated by an HTTP request. The job of
your application is simply to interpret the request and return the appropriate
HTTP response. Symfony2 follows this philosophy and provides you with tools
and conventions to keep your application organized as it grows in users and
complexity.</p>
<div class="section" id="the-hello-symfony-page">
<span id="index-1"></span><h2>The &#8220;Hello Symfony!&#8221; Page<a class="headerlink" href="#the-hello-symfony-page" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s start with a spin off of the classic &#8220;Hello World!&#8221; application. When
we&#8217;re finished, the user will be able to get a personal greeting by going
to the following URL:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Symfony
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The tutorial assumes that you&#8217;ve already downloaded Symfony2 and configured
your webserver. The above URL assumes that <tt class="docutils literal"><span class="pre">localhost</span></tt> points to the
<tt class="docutils literal"><span class="pre">web</span></tt> directory of your new Symfony2 project. For detailed information
on this process, see the <tt class="xref doc docutils literal"><span class="pre">Installing</span> <span class="pre">Symfony2</span></tt>.</p>
</div>
<p>In reality, you&#8217;ll be able to replace <tt class="docutils literal"><span class="pre">Symfony</span></tt> with any other name to be
greeted. To create the page, we&#8217;ll go through the simple two-step process.</p>
<div class="section" id="create-the-route">
<h3>Create the Route<a class="headerlink" href="#create-the-route" title="Permalink to this headline">¶</a></h3>
<p>By default, the routing configuration file in a Symfony2 application is
located at <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt>. Like all configuration in Symfony2,
you can also choose to use XML or PHP out of the box to configure routes:</p>
<p>The first few lines of the routing configuration file define which code to
call when the user requests the &#8220;<tt class="docutils literal"><span class="pre">/</span></tt>&#8221; resource (the homepage) and serves
as an example of routing configuration you may see in this file. More interesting
is the last part, which imports another routing configuration file located
inside the <tt class="docutils literal"><span class="pre">HelloBundle</span></tt>:</p>
<p>The routing consists of two basic pieces: the <tt class="docutils literal"><span class="pre">pattern</span></tt>, which is the URI
that will match this route, and a <tt class="docutils literal"><span class="pre">defaults</span></tt> array, which specifies the
controller that should be executed. The placeholder syntax in the pattern
(<tt class="docutils literal"><span class="pre">{name}</span></tt>) is a wildcard. It means that <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt>, <tt class="docutils literal"><span class="pre">/hello/Fabien</span></tt>
or any other similar URI will match this route. The <tt class="docutils literal"><span class="pre">{name}</span></tt> placeholder
parameter will also be passed to our controller so that we can use its value
to personally greet the user.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The routing system has many more great features for creating flexible
and powerful URI structures in your application. For more details, see
the chapter all about <a class="reference internal" href="routing.html"><em>Routing</em></a>.</p>
</div>
</div>
<div class="section" id="create-the-controller">
<h3>Create the Controller<a class="headerlink" href="#create-the-controller" title="Permalink to this headline">¶</a></h3>
<p>When a URI such as <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt> is handled by the application, the <tt class="docutils literal"><span class="pre">hello</span></tt>
route is matched and the <tt class="docutils literal"><span class="pre">HelloBundle:Hello:index</span></tt> controller is executed
by the framework. The second step of the page-creation process is to create
this controller.</p>
<p>In reality, a controller is nothing more than a PHP method that you create
and Symfony executes. This is where the custom application code uses information
from the request to build and prepare the resource being requested. Except
in some advanced cases, the end product of a controller is always the same:
a Symfony2 <tt class="docutils literal"><span class="pre">Response</span></tt> object:</p>
<div class="highlight-python"><pre>// src/Sensio/HelloBundle/Controller/HelloController.php

namespace Sensio\HelloBundle\Controller;
use Symfony\Component\HttpFoundation\Response;

class HelloController
{
    public function indexAction($name)
    {
        return new Response('&lt;html&gt;&lt;body&gt;Hello '.$name.'!&lt;/body&gt;&lt;/html&gt;');
    }
}</pre>
</div>
<p>The controller is simple: it creates a new <tt class="docutils literal"><span class="pre">Response</span></tt> object, whose first
argument is the content that should be used for the response (a small HTML
page in this case).</p>
<p>Congratulations! After creating only a route and a controller, you already
have a fully-functional page! If you&#8217;ve setup everything correctly, your
application should greet you:</p>
<div class="highlight-python"><pre>http://localhost/app_dev.php/hello/Ryan</pre>
</div>
<p>An optional, but common, third step in the process is to create a template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Controllers are the main entry point for your code and a key ingredient
when creating pages. Much more information can be found in the
<a class="reference internal" href="controller.html"><em>Controller Chapter</em></a>.</p>
</div>
</div>
<div class="section" id="create-the-template">
<h3>Create the Template<a class="headerlink" href="#create-the-template" title="Permalink to this headline">¶</a></h3>
<p>Templates allows us to move all of the presentation (e.g. HTML code) into
a separate file and reuse different portions of the page layout. Instead
of writing the HTML inside the controller, use a template instead:</p>
<div class="highlight-python"><pre>// src/Sensio/HelloBundle/Controller/HelloController.php

namespace Sensio\HelloBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class HelloController extends Controller
{
    public function indexAction($name)
    {
        return $this-&gt;render('HelloBundle:Hello:index.html.twig', array('name' =&gt; $name));

        // render a PHP template instead
        // return $this-&gt;render('HelloBundle:Hello:index.html.php', array('name' =&gt; $name));
    }
}</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use the <tt class="docutils literal"><span class="pre">render()</span></tt> method, you must extend the
<tt class="xref py py-class docutils literal"><span class="pre">SymfonyBundleFrameworkBundleControllerController</span></tt> class, which
adds shortcuts for tasks that are common inside controllers.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">render()</span></tt> method creates a <tt class="docutils literal"><span class="pre">Response</span></tt> object filled with the content
of the given, rendered template. Like any other controller, you will ultimately
return that <tt class="docutils literal"><span class="pre">Response</span></tt> object.</p>
<p>Notice that there are two different examples for rendering the template.
By default, Symfony2 supports two different templating languages: classic
PHP templates and the succinct but powerful <a class="reference external" href="http://www.twig-project.org">Twig</a> templates. Don&#8217;t be alarmed
- you&#8217;re free to choose either or even both in the same project.</p>
<p>The controller renders the <tt class="docutils literal"><span class="pre">HelloBundle:Hello:index.html.twig</span></tt> template,
which uses the following naming convention:</p>
<p><em>BundleName</em>:<em>ControllerName</em>:<em>TemplateName</em></p>
<p>In this case, <tt class="docutils literal"><span class="pre">HelloBundle</span></tt> is the bundle name, <tt class="docutils literal"><span class="pre">Hello</span></tt> is the
controller, and <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> the template:</p>
<p>Let&#8217;s step through the Twig template line-by-line:</p>
<ul class="simple">
<li><em>line 2</em>: The <tt class="docutils literal"><span class="pre">extends</span></tt> token defines a parent template. The template
explicitly defines a layout file inside of which it will be placed.</li>
<li><em>line 4</em>: The <tt class="docutils literal"><span class="pre">block</span></tt> token says that everything inside should be placed
inside a block called <tt class="docutils literal"><span class="pre">body</span></tt>. As we&#8217;ll see, it&#8217;s the responsibility
of the parent template (<tt class="docutils literal"><span class="pre">layout.html.twig</span></tt>) to ultimately render the
block called <tt class="docutils literal"><span class="pre">body</span></tt>.</li>
</ul>
<p>The parent template, <tt class="docutils literal"><span class="pre">::layout.html.twig</span></tt>, is missing both the bundle and controller
portions of its name (hence the double colon (<tt class="docutils literal"><span class="pre">::</span></tt>) at the beginning). This
means that the template lives outside of the bundles and in the <tt class="docutils literal"><span class="pre">app</span></tt> directory:</p>
<p>The base template file defines the HTML layout and renders the <tt class="docutils literal"><span class="pre">body</span></tt> block
that we defined in the <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> template. It also renders a <tt class="docutils literal"><span class="pre">title</span></tt>
block, which we could choose to define in the <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> template.
Since we did not define the <tt class="docutils literal"><span class="pre">title</span></tt> block in the child template, it defaults
to &#8220;Hello Application&#8221;.</p>
<p>Templates are a powerful way to render and organize the content for your
page and can be HTML markup, CSS code, or anything else that the controller
may need to return. But the templating engine is simply a means to an end.
The goal is that each controller returns a <tt class="docutils literal"><span class="pre">Response</span></tt> object. Templates
are a powerful, but optional, tool for creating the content of a <tt class="docutils literal"><span class="pre">Response</span></tt>
object.</p>
</div>
</div>
<div class="section" id="the-directory-structure">
<span id="index-2"></span><h2>The Directory Structure<a class="headerlink" href="#the-directory-structure" title="Permalink to this headline">¶</a></h2>
<p>After just a few short sections, you already understand the philosophy behind
creating and rendering pages in Symfony2. You&#8217;ve also already begun to see
how Symfony2 projects are structured and organized. By the end of this section,
you&#8217;ll know where to find and put different types of files and why.</p>
<p>Though perfectly flexible, by default, each Symfony <a class="reference internal" href="../glossary.html#term-application"><em class="xref std std-term">application</em></a> has
the same basic and recommended directory structure:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">app/</span></tt>: This directory contains the application configuration;</li>
<li><tt class="docutils literal"><span class="pre">src/</span></tt>: All the project PHP code is stored under this directory;</li>
<li><tt class="docutils literal"><span class="pre">vendor/</span></tt>: Any vendor libraries are placed here by convention;</li>
<li><tt class="docutils literal"><span class="pre">web/</span></tt>: This is the web root directory and contains any publicly accessible files;</li>
</ul>
<div class="section" id="the-web-directory">
<h3>The Web Directory<a class="headerlink" href="#the-web-directory" title="Permalink to this headline">¶</a></h3>
<p>The web root directory is the home of all public and static files such as
images, stylesheets, and JavaScript files. It is also where each
<em class="xref std std-term">front controller</em> lives:</p>
<div class="highlight-python"><pre>// web/app.php
require_once __DIR__.'/../app/bootstrap.php';
require_once __DIR__.'/../app/AppKernel.php';

use Symfony\Component\HttpFoundation\Request;

$kernel = new AppKernel('prod', false);
$kernel-&gt;handle(Request::createFromGlobals())-&gt;send();</pre>
</div>
<p>The front controller file (<tt class="docutils literal"><span class="pre">app.php</span></tt> in this example) is the actual PHP
file that&#8217;s executed when using a Symfony2 application and its job is to
use a Kernel class, <tt class="docutils literal"><span class="pre">AppKernel</span></tt>, to bootstrap the application.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Having a front controller means different and more flexible URLs than
are used in a typical flat PHP application. When using a front controller,
URLs are formatted in the following way:</p>
<blockquote>
<div><a class="reference external" href="http://localhost/app.php/hello/Ryan">http://localhost/app.php/hello/Ryan</a></div></blockquote>
<p>The front controller, <tt class="docutils literal"><span class="pre">app.php</span></tt>, is executed and the URI <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt>
is routed internally using the routing configuration. By using Apache
<tt class="docutils literal"><span class="pre">mod_rewrite</span></tt> rules, you can force the <tt class="docutils literal"><span class="pre">app.php</span></tt> file to be executed without
needing to specify it in the URL:</p>
<div class="last highlight-python"><pre>http://localhost/hello/Ryan</pre>
</div>
</div>
<p>Though front controllers are essential in handling every request, you&#8217;ll
rarely need to modify or even think about them. We&#8217;ll mention them again
briefly in the <a class="reference internal" href="#environments">Environments</a> section.</p>
</div>
<div class="section" id="the-application-app-directory">
<h3>The Application (<tt class="docutils literal"><span class="pre">app</span></tt>) Directory<a class="headerlink" href="#the-application-app-directory" title="Permalink to this headline">¶</a></h3>
<p>As you saw in the front controller, the <tt class="docutils literal"><span class="pre">AppKernel</span></tt> class is the main entry
point of the application and is responsible for all configuration. As such,
it is stored in the <tt class="docutils literal"><span class="pre">app/</span></tt> directory.</p>
<p>This class must implement three methods that define everything that Symfony
needs to know about your application. You don&#8217;t even need to worry about
these methods when starting - Symfony fills them in for you with sensible
defaults.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">registerBundles()</span></tt>: Returns an array of all bundles needed to run the
application (see <a class="reference internal" href="#the-bundle-system">The Bundle System</a>);</li>
<li><tt class="docutils literal"><span class="pre">registerContainerConfiguration()</span></tt>: Loads the main application configuration
resource file (see the <a class="reference internal" href="#application-configuration">Application Configuration</a> section);</li>
<li><tt class="docutils literal"><span class="pre">registerRootDir()</span></tt>: Returns the root app directory (defaults to <tt class="docutils literal"><span class="pre">app/</span></tt>).</li>
</ul>
<p>In day-to-day development, you&#8217;ll mostly use the <tt class="docutils literal"><span class="pre">app/</span></tt> directory to modify
configuration and routing files in the <tt class="docutils literal"><span class="pre">app/config/</span></tt> directory (see
<a class="reference internal" href="#application-configuration">Application Configuration</a>). It also contains the application cache directory
(<tt class="docutils literal"><span class="pre">app/cache</span></tt>), a logging directory (<tt class="docutils literal"><span class="pre">app/logs</span></tt>) and a directory for
application-level template files (<tt class="docutils literal"><span class="pre">app/views</span></tt>). You&#8217;ll learn more about
each of these directories in later chapters.</p>
<div class="sidebar" id="autoloading-introduction-sidebar">
<p class="first sidebar-title">Autoloading</p>
<p>When bootstrapping, a special file - <tt class="docutils literal"><span class="pre">app/autoload.php</span></tt> - is included.
This file is responsible for autoloading all the files stored in the
<tt class="docutils literal"><span class="pre">src/</span></tt> and <tt class="docutils literal"><span class="pre">vendor/</span></tt> directories.</p>
<p>Because of the autoloader, you never need to worry about using <tt class="docutils literal"><span class="pre">include</span></tt>
or <tt class="docutils literal"><span class="pre">require</span></tt> statements. Instead, Symfony2 uses the namespace of a class
to determine its location and automatically includes the file on your
behalf the instance you need a class:</p>
<div class="highlight-python"><pre>$loader-&gt;registerNamespaces(array(
    'Sensio'                         =&gt; __DIR__.'/../src',
    // ...
));</pre>
</div>
<p>With this configuration, Symfony2 will look inside the <tt class="docutils literal"><span class="pre">src</span></tt> directory
for any class in the <tt class="docutils literal"><span class="pre">Sensio</span></tt> namespace. For autoloading to work,
the class name and path to the file must follow the same pattern:</p>
<div class="highlight-text"><div class="highlight"><pre>Class Name:
    Sensio\HelloBundle\Controller\HelloController
Path:
    src/Sensio/HelloBundle/Controller/HelloController.php
</pre></div>
</div>
<p class="last">The <tt class="docutils literal"><span class="pre">app/autoload.php</span></tt> configures the autoloader to look for different
PHP namespaces in different directories and can be customized as necessary.
For more information on autoloading, see <a class="reference internal" href="../cookbook/tools/autoloader.html"><em>How to autoload Classes</em></a>.</p>
</div>
</div>
<div class="section" id="the-source-src-directory">
<h3>The Source (<tt class="docutils literal"><span class="pre">src</span></tt>) Directory<a class="headerlink" href="#the-source-src-directory" title="Permalink to this headline">¶</a></h3>
<p>Put simply, the <tt class="docutils literal"><span class="pre">src/</span></tt> directory contains all of the actual PHP code that
runs the application. In fact, when developing, the vast majority of work
will likely be done inside this directory. By default, the <tt class="docutils literal"><span class="pre">src/</span></tt> directory
is empty. When you begin development, you&#8217;ll being to populate the directory
with <em>bundles</em> that contain your application code.</p>
<p>But what exactly is a <a class="reference internal" href="../glossary.html#term-bundle"><em class="xref std std-term">bundle</em></a>?</p>
</div>
</div>
<div class="section" id="the-bundle-system">
<h2>The Bundle System<a class="headerlink" href="#the-bundle-system" title="Permalink to this headline">¶</a></h2>
<p>A bundle is similar to a plugin in other software, but even better. The key
difference is that <em>everything</em> is a bundle in Symfony2, including both the
core framework functionality and the code written for your application.
Bundles are first-class citizens in Symfony2. This gives you the flexibility
to use pre-built features packaged in <a class="reference external" href="http://symfony2bundles.org/">third-party bundles</a> or to distribute
your own bundles. It makes it easy to pick and choose which features to enable
in your application and to optimize them the way you want.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While we&#8217;ll cover the basics here, an entire chapter is devoted to the topic
of <a class="reference internal" href="bundles.html"><em>Bundles</em></a>.</p>
</div>
<p>A bundle is simply a structured set of files within a directory that
implement a single feature. You might create a BlogBundle, a ForumBundle
or a bundle for user management (many of these exist already as open source
bundles). Each directory contains everything related to that feature, including
PHP files, templates, stylesheets, Javascripts, tests and anything else.
Every aspect of a feature exists in a bundle and every feature lives in a
bundle.</p>
<p>An application is made up of bundles as defined in the <tt class="docutils literal"><span class="pre">registerBundles()</span></tt>
method of the <tt class="docutils literal"><span class="pre">AppKernel</span></tt> class:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
        new Symfony\Bundle\TwigBundle\TwigBundle(),

        // enable third-party bundles
        new Symfony\Bundle\ZendBundle\ZendBundle(),
        new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
        new Symfony\Bundle\DoctrineBundle\DoctrineBundle(),
        //new Symfony\Bundle\DoctrineMigrationsBundle\DoctrineMigrationsBundle(),
        //new Symfony\Bundle\DoctrineMongoDBBundle\DoctrineMongoDBBundle(),

        // register your bundles
        new Sensio\HelloBundle\HelloBundle(),
    );

    if (in_array($this-&gt;getEnvironment(), array('dev', 'test'))) {
        $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
    }

    return $bundles;
}</pre>
</div>
<p>With the <tt class="docutils literal"><span class="pre">registerBundles()</span></tt> method, you have total control over which bundles
are used by your application (including the core Symfony bundles).</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A bundle can live <em>anywhere</em> as long as it can be autoloaded by Symfony2.
For example, if <tt class="docutils literal"><span class="pre">SensioHelloBundle</span></tt> lives inside the <tt class="docutils literal"><span class="pre">src/Sensio</span></tt>
directory, be sure that the <tt class="docutils literal"><span class="pre">Sensio</span></tt> namespace has been added to the
<tt class="docutils literal"><span class="pre">app/autoload.php</span></tt> file and mapped to the <tt class="docutils literal"><span class="pre">src</span></tt> directory.</p>
</div>
<div class="section" id="creating-a-bundle">
<h3>Creating a Bundle<a class="headerlink" href="#creating-a-bundle" title="Permalink to this headline">¶</a></h3>
<p>To show you how simple the bundle system is, let&#8217;s create a new bundle called
<tt class="docutils literal"><span class="pre">SensioMyBundle</span></tt> and enable it.</p>
<p>First, create a <tt class="docutils literal"><span class="pre">src/Sensio/SensioMyBundle/</span></tt> directory and add a new file
called <tt class="docutils literal"><span class="pre">SensioMyBundle.php</span></tt>:</p>
<div class="highlight-python"><pre>// src/Sensio/MyBundle/SensioMyBundle.php
namespace Sensio\MyBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class SensioMyBundle extends Bundle
{
}</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The name <tt class="docutils literal"><span class="pre">SensioMyBundle</span></tt> follows the <a class="reference internal" href="bundles.html#bundles-naming-conventions"><em>Bundle naming conventions</em></a>.</p>
</div>
<p>This empty class is the only piece we need to create our new bundle. Though
commonly empty, this class is powerful and can be used to customize the behavior
of the bundle.</p>
<p>Now that we&#8217;ve created our bundle, we need to enable it via the <tt class="docutils literal"><span class="pre">AppKernel</span></tt>
class:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        // ...

        // register your bundles
        new Sensio\MyBundle\SensioMyBundle(),
    );

    // ...

    return $bundles;
}</pre>
</div>
<p>And while it doesn&#8217;t do anything yet, <tt class="docutils literal"><span class="pre">MyBundle</span></tt> is now ready to be used.</p>
<p>And as easy as this is, Symfony also provides a command-line interface for
generating a basic bundle skeleton:</p>
<div class="highlight-python"><pre>./app/console init:bundle "Sensio\MyBundle" src</pre>
</div>
<p>The bundle skeleton generates with a basic controller, template and routing
resource that can be customized. We&#8217;ll talk more about Symfony2&#8217;s command-line
tools later.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Whenever creating a new bundle or using a third-party bundle, be sure
to always make sure that the bundle has been enabled in <tt class="docutils literal"><span class="pre">registerBundles()</span></tt>.</p>
</div>
</div>
<div class="section" id="bundle-directory-structure">
<h3>Bundle Directory Structure<a class="headerlink" href="#bundle-directory-structure" title="Permalink to this headline">¶</a></h3>
<p>The directory structure of a bundle is simple and flexible. By default, the
bundle system follows a set of conventions that help to keep code consistent
between all Symfony2 bundles. Let&#8217;s take a look at <tt class="docutils literal"><span class="pre">HelloBundle</span></tt>, as it
contains some of the most common elements of a bundle:</p>
<ul class="simple">
<li><em>Controller/</em> contains the controllers of the bundle (e.g. <tt class="docutils literal"><span class="pre">HelloController.php</span></tt>);</li>
<li><em>Resources/config/</em> houses configuration, including routing configuration
(e.g. <tt class="docutils literal"><span class="pre">routing.yml</span></tt>);</li>
<li><em>Resources/views/</em> templates organized by controller name (e.g. <tt class="docutils literal"><span class="pre">Hello/index.html.twig</span></tt>);</li>
<li><em>Resources/public/</em> contains web assets (images, stylesheets, etc) and is
copied or symbolically linked into the project <tt class="docutils literal"><span class="pre">web/</span></tt> directory;</li>
<li><em>Tests/</em> holds all tests for the bundle.</li>
</ul>
<p>A bundle can be as small or large as the feature it implements. It contains
only the files you need and nothing else.</p>
<p>As you move through the book, you&#8217;ll learn how to persist objects to a database,
create and validate forms, create translations for your application, write
tests and much more. Each of these has their own place and role within the
bundle.</p>
</div>
</div>
<div class="section" id="application-configuration">
<h2>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h2>
<p>An application consists of a collection of bundles representing all of the
features and capabilities of your application. Each bundle can be customized
via configuration files written in YAML, XML or PHP. By default, the main
configuration file lives in the <tt class="docutils literal"><span class="pre">app/config/</span></tt> directory and is called
either <tt class="docutils literal"><span class="pre">config.yml</span></tt>, <tt class="docutils literal"><span class="pre">config.xml</span></tt> or <tt class="docutils literal"><span class="pre">config.php</span></tt> depending on which
format you prefer:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We&#8217;ll show you how to choose exactly which file/format to load in the
next section <a class="reference internal" href="#environments">Environments</a>.</p>
</div>
<p>Each top-level entry like <tt class="docutils literal"><span class="pre">framework</span></tt> or <tt class="docutils literal"><span class="pre">twig</span></tt> defines the configuration
for a particular bundle. For example, the <tt class="docutils literal"><span class="pre">framework</span></tt> key defines the configuration
for the core Symfony <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt> and includes configuration for the
routing, templating, and other core systems.</p>
<p>For now, don&#8217;t worry about the specific configuration options in each section.
The configuration file ships with sensible defaults. As you read more and
explore each part of Symfony2, you&#8217;ll learn about the specific configuration
options of each feature.</p>
<div class="sidebar">
<p class="first sidebar-title">Configuration Formats</p>
<p>Throughout the chapters, all configuration examples will be shown in all
three formats (YAML, XML and PHP). Each has its own advantages and
disadvantages. The choice of which to use is up to you:</p>
<ul class="last simple">
<li><em>YAML</em>: Simple, clean and readable;</li>
<li><em>XML</em>: More powerful than YAML at times and supports IDE autocompletion;</li>
<li><em>PHP</em>: Very powerful but less readable than standard configuration formats.</li>
</ul>
</div>
</div>
<div class="section" id="environments">
<span id="environments-summary"></span><span id="index-3"></span><h2>Environments<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h2>
<p>An application can run in various environments. The different environments
share the same PHP code (apart from the front controller), but can have completely
different configurations. For instance, a <tt class="docutils literal"><span class="pre">dev</span></tt> environment will log warnings
and errors, while a <tt class="docutils literal"><span class="pre">prod</span></tt> environment will only log errors. Some files
are rebuilt on each request in the <tt class="docutils literal"><span class="pre">dev</span></tt> environment, but cached in the
<tt class="docutils literal"><span class="pre">prod</span></tt> environment. All environments live together on the same machine.</p>
<p>A Symfony2 project generally begins with three environments (<tt class="docutils literal"><span class="pre">dev</span></tt>, <tt class="docutils literal"><span class="pre">test</span></tt>
and <tt class="docutils literal"><span class="pre">prod</span></tt>), though creating new environments is easy. You can view your
application in different environments simply by changing the front controller
in your browser. To see the application in the <tt class="docutils literal"><span class="pre">dev</span></tt> environment, access
the application via the development front controller:</p>
<div class="highlight-python"><pre>http://localhost/app_dev.php/hello/Ryan</pre>
</div>
<p>If you&#8217;d like to see how your application will behave in the production environment,
call the <tt class="docutils literal"><span class="pre">prod</span></tt> front controller instead:</p>
<div class="highlight-python"><pre>http://localhost/app.php/hello/Ryan</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you open the <tt class="docutils literal"><span class="pre">web/app.php</span></tt> file, you&#8217;ll find that it&#8217;s configured explicitly
to use the <tt class="docutils literal"><span class="pre">prod</span></tt> environment:</p>
<div class="highlight-python"><pre>$kernel = new AppCache(new AppKernel('prod', false));</pre>
</div>
<p class="last">You can create a new front controller for a new environment by copying
this file and changing <tt class="docutils literal"><span class="pre">prod</span></tt> to some other value.</p>
</div>
<p>Since the <tt class="docutils literal"><span class="pre">prod</span></tt> environment is optimized for speed; the configuration,
routing and Twig templates are compiled into flat PHP classes and cached.
When viewing changes in the <tt class="docutils literal"><span class="pre">prod</span></tt> environment, you&#8217;ll need to clear these
cached files and allow them to rebuild:</p>
<div class="highlight-python"><pre>rm -rf app/cache/*</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">test</span></tt> environment is used when running automated tests and cannot
be accessed directly through the browser. See the <a class="reference internal" href="testing.html"><em>testing chapter</em></a>
for more details.</p>
</div>
<div class="section" id="environment-configuration">
<span id="index-4"></span><h3>Environment Configuration<a class="headerlink" href="#environment-configuration" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">AppKernel</span></tt> class is responsible for actually loading the configuration
file of your choice:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerContainerConfiguration(LoaderInterface $loader)
{
    $loader-&gt;load(__DIR__.'/config/config_'.$this-&gt;getEnvironment().'.yml');
}</pre>
</div>
<p>We already know that the <tt class="docutils literal"><span class="pre">.yml</span></tt> extension can be changed to <tt class="docutils literal"><span class="pre">.xml</span></tt> or
<tt class="docutils literal"><span class="pre">.php</span></tt> if you prefer to use either XML or PHP to write your configuration.
Notice also that each environment loads its own configuration file. Consider
the configuration file for the <tt class="docutils literal"><span class="pre">dev</span></tt> environment.</p>
<p>The <tt class="docutils literal"><span class="pre">imports</span></tt> key is similar to a PHP <tt class="docutils literal"><span class="pre">include</span></tt> statement and guarantees
that the main configuration file (<tt class="docutils literal"><span class="pre">config.yml</span></tt>) is loaded first. The rest
of the file tweaks the default configuration for increased logging and other
settings condusive to a development environment.</p>
<p>Both the <tt class="docutils literal"><span class="pre">prod</span></tt> and <tt class="docutils literal"><span class="pre">test</span></tt> environments follow the same model: each environment
imports the base configuration file and then modifies its configuration values
to fit the needs of the specific environment.</p>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Congratulations! You&#8217;ve now seen every fundamental aspect of Symfony2 and have
hopefully discovered how easy and flexible it can be. And while there are
<em>a lot</em> of features still to come, be sure to keep the following basic points
in mind:</p>
<ul class="simple">
<li>creating a page is a three-step process involving a <strong>route</strong>, a <strong>controller</strong>
and (optionally) a <strong>template</strong>.</li>
<li>each application should contain only four directories: <strong>web/</strong> (web assets and
the front controllers), <strong>app/</strong> (configuration), <strong>src/</strong> (your bundles),
and <strong>vendor/</strong> (third-party code);</li>
<li>each feature in Symfony2 (including the Symfony2 framework core) is organized
into a <em>bundle</em>, which is a structured set of files for that feature;</li>
<li>the <strong>configuration</strong> for each bundle lives in the <tt class="docutils literal"><span class="pre">app/config</span></tt> directory
and can be specified in YAML, XML or PHP;</li>
<li>each <strong>environment</strong> is accessible via a different front controller (e.g.
<tt class="docutils literal"><span class="pre">app.php</span></tt> and <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>) and loads a different configuration file.</li>
</ul>
<p>From here, each chapter will introduce you to more and more powerful tools
and advanced concepts. The more you know about Symfony2, the more you&#8217;ll
appreciate the flexibility of its architecture and the power it gives you
to rapidly develop applications.</p>
</div>
<div class="section" id="learn-more-from-the-cookbook">
<h2>Learn more from the Cookbook<a class="headerlink" href="#learn-more-from-the-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/controller/service.html"><em>How to define Controllers as Services</em></a></li>
<li><a class="reference internal" href="../cookbook/templating/PHP.html"><em>How to use PHP instead of Twig for Templates</em></a></li>
<li><a class="reference internal" href="../cookbook/tools/autoloader.html"><em>How to autoload Classes</em></a></li>
<li><a class="reference internal" href="../cookbook/symfony1.html"><em>How Symfony2 differs from symfony1</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creating Pages in Symfony2</a><ul>
<li><a class="reference internal" href="#the-hello-symfony-page">The &#8220;Hello Symfony!&#8221; Page</a><ul>
<li><a class="reference internal" href="#create-the-route">Create the Route</a></li>
<li><a class="reference internal" href="#create-the-controller">Create the Controller</a></li>
<li><a class="reference internal" href="#create-the-template">Create the Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-directory-structure">The Directory Structure</a><ul>
<li><a class="reference internal" href="#the-web-directory">The Web Directory</a></li>
<li><a class="reference internal" href="#the-application-app-directory">The Application (<tt class="docutils literal"><span class="pre">app</span></tt>) Directory</a></li>
<li><a class="reference internal" href="#the-source-src-directory">The Source (<tt class="docutils literal"><span class="pre">src</span></tt>) Directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-bundle-system">The Bundle System</a><ul>
<li><a class="reference internal" href="#creating-a-bundle">Creating a Bundle</a></li>
<li><a class="reference internal" href="#bundle-directory-structure">Bundle Directory Structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#application-configuration">Application Configuration</a></li>
<li><a class="reference internal" href="#environments">Environments</a><ul>
<li><a class="reference internal" href="#environment-configuration">Environment Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#learn-more-from-the-cookbook">Learn more from the Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="from_flat_php_to_symfony2.html"
                        title="previous chapter">From flat PHP to Symfony2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="doctrine/index.html"
                        title="next chapter">Doctrine</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/page_creation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="doctrine/index.html" title="Doctrine"
             >next</a> |</li>
        <li class="right" >
          <a href="from_flat_php_to_symfony2.html" title="From flat PHP to Symfony2"
             >previous</a> |</li>
        <li><a href="../index.html">symfony-docs-fr v0.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Manuel</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>