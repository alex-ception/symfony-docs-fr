

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MongoDB ODM &mdash; symfony-docs-fr v0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="symfony-docs-fr v0.1 documentation" href="../../../index.html" />
    <link rel="up" title="MongoDB Object Document Mapper" href="index.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="MongoDB Object Document Mapper" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="MongoDB Object Document Mapper"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">symfony-docs-fr v0.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Manuel</a> &raquo;</li>
          <li><a href="../index.html" >Doctrine</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">MongoDB Object Document Mapper</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mongodb-odm">
<span id="index-0"></span><h1>MongoDB ODM<a class="headerlink" href="#mongodb-odm" title="Permalink to this headline">Â¶</a></h1>
<p>The <a class="reference external" href="http://www.mongodb.org/">MongoDB</a> Object Document Mapper is much like the Doctrine2 ORM in the way
it works and architecture. You only deal with plain PHP objects and they are
persisted transparently without imposing on your domain model.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can read more about the Doctrine MongoDB Object Document Mapper on the
projects <a class="reference external" href="http://www.doctrine-project.org/projects/mongodb_odm/1.0/docs/en">documentation</a>.</p>
</div>
<p>To get started working with Doctrine and the MongoDB Object Document Mapper you
just need to enable it and specify the bundle that contains your mapped documents:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>

<span class="l-Scalar-Plain">doctrine_mongo_db</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">mappings</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">HelloBundle</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
</pre></div>
</div>
<p>Now you can start writing documents and mapping them with annotations, xml, or
yaml. In this example we will use annotations:</p>
<div class="highlight-python"><pre>// Sensio/HelloBundle/Document/User.php

namespace Sensio\HelloBundle\Document;

/**
 * @mongodb:Document(collection="users")
 */
class User
{
    /**
     * @mongodb:Id
     */
    protected $id;

    /**
     * @mongodb:String
     */
    protected $name;

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this-&gt;id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this-&gt;name = $name;
    }

    /**
     * Get name
     *
     * @return string $name
     */
    public function getName()
    {
        return $this-&gt;name;
    }
}</pre>
</div>
<p>Now, use your document and manage its persistent state with Doctrine:</p>
<div class="highlight-python"><pre>use Sensio\HelloBundle\Document\User;

class UserController extends Controller
{
    public function createAction()
    {
        $user = new User();
        $user-&gt;setName('Jonathan H. Wage');

        $dm = $this-&gt;get('doctrine.odm.mongodb.document_manager');
        $dm-&gt;persist($user);
        $dm-&gt;flush();

        // ...
    }

    public function editAction($id)
    {
        $dm = $this-&gt;get('doctrine.odm.mongodb.document_manager');
        $user = $dm-&gt;createQuery('find all from HelloBundle:User where id = ?', $id);
        $user-&gt;setBody('new body');
        $dm-&gt;flush();

        // ...
    }

    public function deleteAction($id)
    {
        $dm = $this-&gt;get('doctrine.odm.entity_manager');
        $user = $dm-&gt;createQuery('find all from HelloBundle:User where id = ?', $id);
        $dm-&gt;remove($user);
        $dm-&gt;flush();

        // ...
    }
}</pre>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">MongoDB Object Document Mapper</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="next chapter">Configuration</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/book/doctrine/mongodb-odm/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="MongoDB Object Document Mapper"
             >previous</a> |</li>
        <li><a href="../../../index.html">symfony-docs-fr v0.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Manuel</a> &raquo;</li>
          <li><a href="../index.html" >Doctrine</a> &raquo;</li>
          <li><a href="index.html" >MongoDB Object Document Mapper</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>